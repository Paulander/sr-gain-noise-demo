<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Stochastic Resonance Demo — Gain/Dopamine vs Noise</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<header>
  <h1>Stochastic Resonance (SR): gain/dopamine × threshold × noise</h1>
  <p>Interactive toy model of a threshold detector with dopaminergic gain. Shows why adding moderate broadband noise can improve performance (inverted‑U), and why lower gain shifts the optimum right.</p>
</header>
<main>
  <section class="panel controls">
    <h2>Controls</h2>

    <div class="row toggle"><label for="showVals"><input id="showVals" type="checkbox" checked> Show slider values</label><span></span><span></span></div>

    <div class="row">
      <label>Signal amplitude <b>s</b> <span class="small">(subthreshold stimulus)</span></label>
      <span class="val" id="sVal">0.20</span>
      <input id="s" type="range" min="0" max="1" step="0.01" value="0.20">
    </div>

    <div class="row">
      <label>Threshold <b>θ</b></label>
      <span class="val" id="thetaVal">0.50</span>
      <input id="theta" type="range" min="0" max="1.0" step="0.01" value="0.50">
    </div>

    <div class="row">
      <label>Internal noise σ<sub>int</sub></label>
      <span class="val" id="sigmaIntVal">0.05</span>
      <input id="sigmaInt" type="range" min="0" max="0.50" step="0.005" value="0.05">
    </div>

    <div class="row">
      <label>External noise coupling <b>α</b></label>
      <span class="val" id="alphaVal">1.00</span>
      <input id="alpha" type="range" min="0" max="2.0" step="0.01" value="1.00">
    </div>

    <div class="row">
      <label>Max external noise σ<sub>ext,max</sub> (x‑axis)</label>
      <span class="val" id="sigmaMaxVal">1.20</span>
      <input id="sigmaMax" type="range" min="0.2" max="3.0" step="0.05" value="1.20">
    </div>

    <hr style="border:none;border-top:1px solid #171c25; margin:10px 0">

    <div class="split">
      <div class="panel" style="background:#0f1319">
        <div class="row">
          <label>Gain (Group A) <b>g<sub>A</sub></b> <span class="small">(“ADHD/low‑DA”)</span></label>
          <span class="val" id="g1Val">1.00</span>
          <input id="g1" type="range" min="0.1" max="5.0" step="0.01" value="1.00">
        </div>
      </div>
      <div class="panel" style="background:#0f1319; margin-top:8px;">
        <div class="row">
          <label>Gain (Group B) <b>g<sub>B</sub></b> <span class="small">(“Control/higher‑DA”)</span></label>
          <span class="val" id="g2Val">2.00</span>
          <input id="g2" type="range" min="0.1" max="5.0" step="0.01" value="2.00">
        </div>
      </div>
    </div>

    <div class="row">
      <label><input id="showTwo" type="checkbox" checked> Show both groups</label>
      <span></span>
      <span></span>
    </div>

    <div class="btns">
      <button id="reset">Reset</button>
      <button id="export">Export PNG</button>
    </div>

    <div class="kv">
      <div>Metric:</div><div>Balanced accuracy = ½·(hit rate + specificity).</div>
      <div>Hit rate H:</div><div>H = 1 − Φ((θ − g·s)/(g·σ)), where σ = √(σ²<sub>int</sub> + (α·σ<sub>ext</sub>)²)</div>
      <div>False alarm F:</div><div>F = 1 − Φ(θ/(g·σ)). Specificity = 1 − F.</div>
      <div>Why inverted‑U?</div><div>Small noise helps subthreshold signals cross the effective boundary; too much noise raises false alarms.</div>
    </div>
    <details>
      <summary>More notes</summary>
      <div class="small" style="margin-top:6px; line-height:1.5">
        <p><b>Gain <i>g</i></b> stands in for dopaminergic modulation (steeper input–output). Lower <i>g</i> ⇒ you need more external noise to reach the sweet spot (right‑shift).</p>
        <p><b>α</b> is how strongly external broadband noise (e.g., white noise) couples into effective internal noise. Continuous, non‑salient noise acts like “dither.”</p>
        <p>This is a deliberately minimal, static model (no dynamics, no attention). It’s meant to illustrate the Moderate Brain Arousal intuition, not prove it.</p>
      </div>
    </details>
  </section>

  <section class="panel">
    <canvas id="plot" width="1200" height="520"></canvas>
    <div class="legend">
      <div class="chip"><span class="dot a"></span><span>Group A (g<sub>A</sub>) — peak at <span id="peakA" class="accent">–</span></span></div>
      <div class="chip"><span class="dot b"></span><span>Group B (g<sub>B</sub>) — peak at <span id="peakB" class="accent">–</span></span></div>
    </div>
  </section>
</main>

<script src="app.js"></script>
</body>
</html>
